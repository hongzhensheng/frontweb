<!DOCTYPE html>
<html lang="Zh-cn">

	<head>
		<meta charset="UTF-8">
		<!--强制浏览器以webkit内核渲染,IE以最高版本渲染-->
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<meta name="format-detection" content="telephone=no" />
		<title></title>
		<link rel="stylesheet" href="./css/card.css" />
	</head>

	<body>
		<div class="music">
			<img src="./img/card/music_pointer.png" />
			<img id="music" class="play" src="./img/card/music_disc.png" />
			<audio autoplay="true">
				<source src="./sourse/bgm.mp3" type="audio/mpeg"></source>
			</audio>
		</div>
		<div class="page" id="page1">
			<div class="bg"></div>
			<div class="p1-lantern">点击屏幕<br>开启好运2016</div>
			<div class="p1-imooc"></div>
			<div class="p1-words">2016年新年快乐!</div>
		</div>
		<div class="page" id="page2">
			<div class="p2-bg-loading"></div>
			<div class="bg"></div>
			<div class="p2-circle"></div>
			<div class="p2-2016"></div>
		</div>
		<div class="page" id="page3">
			<div class="bg"></div>
			<div class="p3-logo"></div>
			<div class="p3-title"></div>
			<div class="p3-second"></div>
			<div class="p3-first"></div>
			<div class="p3-blessing"></div>
		</div>
	</body>

</html>
<!--defer 就是加载完html在执行js,但有兼容问题-->
<script defer="defer"></script>
<script>
	window.onload = function() {
		var page1 = document.getElementById('page1');
		var page2 = document.getElementById('page2');
		var page3 = document.getElementById('page3');
		var music = document.getElementById('music');
		var _audio = document.getElementsByTagName('audio')[0];
		_audio.addEventListener('ended', function() {
			music.setAttribute("class", "");
		}, false);
		/*music.onclick = function() {
			if (_audio.paused) {
				_audio.play();
				this.setAttribute("class", "play");
				//this.style.animationPlayState="running";
				//this.style.webkitanimationPlayState="running";
			} else {
				_audio.pause();
				this.setAttribute("class", "");
				//this.style.animationPlayState="paused";
				//this.style.webkitanimationPlayState="paused";
			}
		};*/
		music.addEventListener('touchstart', function() {
			if (_audio.paused) {
				_audio.play();
				this.setAttribute("class", "play");
			} else {
				_audio.pause();
				this.setAttribute("class", "");
			}
		}, false);
		page1.addEventListener('touchstart', function() {
			page1.style.display = 'none';
			page2.style.display = 'block';
			page3.style.display = 'block';
			page3.style.top = "100%";
			setTimeout(function() {
				page2.setAttribute('class', 'page fadeOut');
				page3.setAttribute('class', 'page fadeIn');
			}, 6500);
		}, false);
	}
</script>